# 环境方案对比与选择

关联：[[02 环境配置]] | [[环境配置/pyenv]] | [[环境配置/uv]] | [[环境配置/Conda]] | [[环境配置/venv 与 pip]]

你作为前端工程师切入 Python，最关键的不是“装上 Python”，而是选一套**长期不崩的环境策略**。

## 先给结论：什么时候选什么

> [!tip] 80% 应用开发的推荐组合
> - `pyenv` 管 Python 版本（像 nvm）
> - `uv` 管虚拟环境 + 依赖（像 pnpm + lockfile + run）

> [!note] 什么时候选 conda
> - 你明确在做数据科学 / 科学计算 / 需要复杂二进制依赖（例如 numpy/scipy、CUDA）
> - 团队已有 conda 流程（环境 yml、channels、镜像）
> - 你需要“环境里不仅有 Python 包，还有系统级依赖”这种强封装

> [!warning] 什么时候不要用 conda
> - 你在做 Web/API/脚本工具为主的应用开发
> - 你希望和 Python 主流应用生态（`pyproject.toml`、wheel、CI）深度对齐

## 三层心智模型（像前端那样拆清楚）

### 1) Python 解释器版本（对标 Node 版本）

- 目标：项目能固定在某个版本（例如 3.12），本地/CI 一致
- 工具：[[环境配置/pyenv]]（或 conda 自带 Python）

### 2) 虚拟环境（对标“每个项目一套 node_modules”）

- 目标：项目依赖隔离，不污染全局
- 工具：[[环境配置/uv]] 或 [[环境配置/venv 与 pip]] 或 conda env

### 3) 依赖声明与锁定（对标 package.json + lockfile）

- 目标：声明依赖范围 + 生成可复现的锁文件
- 工具：`pyproject.toml` + lock（见 [[环境配置/pyproject.toml 与依赖管理]]）

## 工具对比（前端视角）

### pyenv（像 nvm）

- 做什么：安装/切换多个 Python 版本；用 `.python-version` 锁项目版本
- 不做什么：不负责装第三方依赖（要配合 venv/uv）

见：[[环境配置/pyenv]]

### uv（像 pnpm + 更快的 pip + 一键 run）

- 做什么：创建 `.venv`、安装依赖、锁定、运行命令（非常快）
- 适合：应用开发、脚手架、后端服务、脚本工具

见：[[环境配置/uv]]

### venv + pip（Python 内置的“最小可用组合”）

- 做什么：官方内置创建虚拟环境；pip 安装依赖
- 适合：理解原理、简单脚本、受限环境

见：[[环境配置/venv 与 pip]]

### conda（像“带系统依赖的超级环境盒子”）

- 做什么：不仅管理 Python 包，也管理二进制依赖；环境隔离强
- 适合：数据科学、科学计算、需要特定 BLAS/CUDA 版本

见：[[环境配置/Conda]]

## 一个“工程化”的决策流程

1) 你在写 API/服务/脚本工具吗？
- 是：优先 `pyenv + uv`
- 否：进入 2

2) 你是否依赖大量科学计算/二进制包（numpy/scipy/pytorch）？
- 是：优先 conda
- 否：优先 `pyenv + uv`

3) 团队有没有既定标准？
- 有：以团队标准为主（工具一致性 > 个人偏好）

## 最小落地模板（建议你照着做）

对于一个新项目（应用开发）：

1. 用 pyenv 选定 Python 版本（[[环境配置/pyenv]]）
2. 用 uv 创建虚拟环境并管理依赖（[[环境配置/uv]]）
3. 维护 `pyproject.toml`（[[环境配置/pyproject.toml 与依赖管理]]）
4. 配 VS Code（[[环境配置/VS Code 开发体验]]）
