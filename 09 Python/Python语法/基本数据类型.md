# 基本数据类型

关联：[[01 Python语法]] | [[Python语法/运算符]] | [[Python语法/类型标注（typing）]]

## 前端视角对比

- JS 里 `number` 是双精度浮点（IEEE 754），Python 把整数和浮点分开：`int` / `float`
- JS 的大整数要用 `BigInt`，Python 的 `int` 默认就是任意精度（不会溢出，只会变大）
- JS 有 `null` 和 `undefined`，Python 统一用 `None`
- Python 字符串是 Unicode；二进制数据通常用 `bytes`（JS 则有 `Buffer` / `Uint8Array`）

## Python 常见类型

```py
n: int = 1
pi: float = 3.14
ok: bool = True
empty = None
text: str = "hello"

data: bytes = b"\x01\x02"
```

## 数值类型：int / float / complex

```py
z: complex = 1 + 2j
```

- `int`：任意精度整数（不会溢出）；做计数、ID、位运算常用
- `float`：双精度浮点；仍然有精度误差
- `complex`：复数（在工程里不常用，但语言原生支持）

> [!warning] 浮点数不要用 == 做“业务精度”的比较
> 例如价格、金额等场景，优先用 `decimal.Decimal` 或者把金额统一转成“分”（整数）处理。

## Decimal：做钱/精度要求高的计算

```py
from decimal import Decimal

price = Decimal("0.1") + Decimal("0.2")
print(price)  # 0.3
```

## bool 与 None 的语义

- `bool` 只有 `True/False`，但它是 `int` 的子类（`True == 1`）
- `None` 表示“缺失/没有值/尚未初始化”，判断永远用 `is None`

```py
x = None
if x is None:
    ...
```

## str / bytes / bytearray：文本 vs 二进制

前端在 Node 里经常会遇到 `string` vs `Buffer`；Python 里对应：

- `str`：文本（Unicode）
- `bytes`：不可变二进制
- `bytearray`：可变二进制

编码/解码是两件事：

```py
s = "你好"
b = s.encode("utf-8")   # str -> bytes
print(b)

s2 = b.decode("utf-8")  # bytes -> str
print(s2)
```

> [!tip] 最容易出 bug 的地方
> - 你以为你在处理“字符串”，其实你拿到的是 `bytes`
> - 或者你在读/写文件时没指定 `encoding`，导致跨平台乱码
> 相关内容见：[[Python语法/文件与路径（open、pathlib）]]。

## 类型判断：type vs isinstance

工程里更推荐 `isinstance`（支持继承）。

```py
def f(x: object) -> str:
    if isinstance(x, int):
        return "int"
    if isinstance(x, str):
        return "str"
    return "other"
```

## 小练习

1. 写一个函数 `safe_int(x: str) -> int | None`：能转就返回 int，不能转返回 None（结合 [[Python语法/异常处理（try、except、finally、raise）]]）。
2. 写一段代码演示：`0.1 + 0.2 != 0.3`，并用 `Decimal` 修复。
3. 把一段中文 `str` 编码成 `bytes` 写入文件，再读出来解码回 `str`（结合 [[Python语法/上下文管理器（with）]]）。

## 类型转换（类似 JS 的 Number/String/Boolean）

```py
int("123")
float("3.14")
str(123)
bool(0)        # False
bool("")       # False
```

## 易踩坑

- `bool` 是 `int` 的子类：`True == 1` 为真，做数值计算时要留意
- 比较 `None` 用 `is`：`x is None`（不要写 `x == None`）
