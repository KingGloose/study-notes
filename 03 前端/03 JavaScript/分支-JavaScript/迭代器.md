# 1 基本介绍

1、下面的`for of`和`for in`本质也是实现了迭代器，来遍历`可迭代对象`

```javascript
// for of
let name = ['张三','李四','王五','赵六'];
for(let i of name){
	console.log(i);
}

// for in
let name = ['张三','李四','王五','赵六'];
for(let i in name){
	console.log(i);
}
```

2、可以理解为迭代器（Itreator）是一种`接口`，为各种不同数据结构提供统一的访问机制，任何数据结构只要部署了`Itreator`接口，就可以完成遍历操作。其中对于`迭代器`就需要实现`next()方法`

![[00 assets/87a5968c271b1fe7f47b04a52f393c13_MD5.png]]

3、其中对于`next()`函数的返回值就是按照下面的方式来处理的

![[00 assets/7a81f570250385d82506ff550e10c3f3_MD5.png]]

4、假如你要简单的实现的话，可以理解为按照下面的方式来处理

![[00 assets/94d539f248e8561f25c50465dad65097_MD5.png]]

# 2 可迭代对象

1、先来区分`可迭代对象`和`迭代器`，它们的的英文分别为`iterable protocol`和`iterator protocol`。这里我们改造了`14.1`的`迭代器`，手写了一个`可迭代对象`

![[00 assets/096af217e6dec0fb1733fbd07a4d48ba_MD5.png]]

2、我们使用`for of`来遍历对象，可以发现`obj`并不是一个`可迭代对象`

![[00 assets/ccefea6138c313df50010d51f3d600f2_MD5.png]]

3、通过`for of`遍历`可迭代对象`可以知道`for of`的原理。取出对象中的`[Symbol.iterator]`，调用`next()`方法，判断`done`的值，取出`value`值

![[00 assets/5b143fbddb8d9f72cf500026f7ab110c_MD5.png]]

# 3 内置可迭代对象

![[00 assets/e957aea1c424bf11899e077d27739bdb_MD5.png]]

其实说白了就是内部会内置一个`[Symbol.Iterator]`属性

![[00 assets/8535c05f40438d76ec9c1619cc26c244_MD5.png]]

可迭代对象的应用

![[00 assets/0ab798072b22dfa996e54067609e95ff_MD5.png]]

1、对于`展开语法`本质也是使用的`迭代器`来遍历处理的

![[00 assets/51ffc563ac63be274193e874e42993f5_MD5.png]]

对象使用`展开语法`的本质其实并不是使用的迭代器来处理的，而是`ES9`新增的特性

![[00 assets/e19a6d051e198652e3903b72ab540ec8_MD5.png]]

2、`解构赋值`本身也是实现的`迭代器`

![[00 assets/eff8f316c669f04ec89be342f7cfb738_MD5.png]]

3、当我们给一些构造函数传入数据的时候，内部其实也是使用的`迭代对象`

![[00 assets/ffe7e0dfc44bac265ed61cb96e3adc37_MD5.png]]

4、`Promise.all`本身也存在`迭代对象`

![[00 assets/2bb79e1353510e356796c5f2de34da99_MD5.png]]

# 4 自定义迭代类

![[00 assets/ee2cf19a8c9d747f1af510bea2e8a7fe_MD5.png]]

1、使用下面的方式就实现了`自定义迭代类`

![[00 assets/caef2efa95a88f5ea86cbd52f17e6326_MD5.png]]

假如是函数的话就使用下面的方式来自定义迭代器

![[00 assets/706a77cf33178613e5c3254e5a8a2b61_MD5.png]]

2、假如我们想要提前结束迭代器，并且实现监听的话，需要给返回的`[Symbol.iterator]`添加一个`return`函数

![[00 assets/98b74f64833570ea64f9d517f87f52b4_MD5.png]]



# 5 label 语法

1、除了我们常见的 for of 或者 for in 的写法，我们还存在下述的写法来直接在内层的 for 循环中直接指定跳过外层循环，本质其实就是一个语法糖

![[00 assets/5e22905d84ce01cf1cd740cbdfe3c011_MD5.png]]

